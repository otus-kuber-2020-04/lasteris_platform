FROM python:3.8

ENV PORT=8000
ENV USER=1001
ENV BASE_DIRECTORY=/usr/src/httpserver
ENV DIRECTORY=${DIRECTORY}/app

WORKDIR ${BASE_DIRECTORY}

COPY . .

EXPOSE ${PORT}

ENV PYTHONDONTWRITEBYTECODE 1

ENV PYTHONUNBUFFERED 1

RUN python -m pip install -r requirements.txt

RUN chown -R ${USER} ${BASE_DIRECTORY}
USER ${USER}

CMD ["python", "app.py"]
